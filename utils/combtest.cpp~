
#include <stdio.h>
#include <iostream>
#include <vector>

using namespace std;

void printmatrix(vector<vector<int> > listobj){
	for (unsigned int i = 0; i < listobj.size(); i++) {
		for (unsigned int j = 0; j < listobj[i].size(); j++) {
			cout << " " << listobj[i][j] << "\t";
		}
		cout << "\n";
	}
	cout << "\n";
}

/* Prints out a combination like {1, 2} */
void printc(int comb[], int k) {
	printf("{");
	for (int i = 0; i < k; ++i)
		printf("%d, ", comb[i] + 1);
	printf("\b\b}\n");
}

/*
	next_comb(int comb[], int k, int n)
		Generates the next combination of n elements as k after comb

	comb => the previous combination ( use (0, 1, 2, ..., k) for first)
	k => the size of the subsets to generate
	n => the size of the original set

	Returns: 1 if a valid combination was found
		0, otherwise
*/
int next_comb(int comb[], int k, int n) {
	int i = k - 1;
	++comb[i];
	while ((i >= 0) && (comb[i] >= n - k + 1 + i)) {
		--i;
		++comb[i];
	}

	if (comb[0] > n - k) /* Combination (n-k, n-k+1, ..., n) reached */
		return 0; /* No more combinations can be generated */

	/* comb now looks like (..., x, n, n, n, ..., n).
	Turn it into (..., x, x + 1, x + 2, ...) */
	for (i = i + 1; i < k; ++i)
		comb[i] = comb[i - 1] + 1;

	return 1;
}

vector<vector<int> > run(int n, int k){

	int comb[512]; /* comb[i] is the index of the i-th element in the combination */
	vector<vector<int> > out;
	vector<int> elem;
	/* Setup comb for the initial combination */
	//int i;
	for (int i = 0; i < k; ++i) {
		comb[i] = i;
		elem.push_back(i+1);
	}
	out.push_back(elem);

	/* Print the first combination */
	printc(comb, k);

	/* Generate and print all the other combinations */
	while (next_comb(comb, k, n)) {
		printc(comb, k);
		vector<int> elem;
		for (int i = 0; i < k; ++i) {
			elem.push_back(comb[i]+1);
		}
		out.push_back(elem);
	}
	return out;

}

int main(int argc, char *argv[]) {

	printmatrix(run(8,3));

}

